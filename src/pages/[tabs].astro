---
export const prerender = false;
import Layout from '../layouts/Layout.astro';
import Gallery from '../components/Gallery.astro';
import { getTabPacks } from '../utils/feath';
import type { PacksResponse } from '../utils/types/definitions';

const { tabs = '' } = Astro.params;
const page: number = parseInt(Astro.url.searchParams.get("page") || "1");
const itemsPerPage: number = 12;
const offset: number = (page - 1) * itemsPerPage;

const { data }: PacksResponse = await getTabPacks(itemsPerPage, offset, tabs);
---

<Layout title={`Packs ${tabs}`}>
	<main class="max-w-screen-lg mx-auto p-4">
		<Gallery packs={data.packs} totalItems={data.stats.total} itemsPerPage={itemsPerPage}/>
	</main>
</Layout>
